# HOW TO MONITOR

## Setting Up

Should be self explanatory but here are some quick instructions to follow:

1. https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-RUM-get-started-create-app-monitor.html
    * Note if running locally, set **Application domain** to "localhost"
    * This will generate a code (for HTML, javascript or typescript; choose whichever is appropriate). 
2. https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-RUM-get-started-insert-code-snippet.html
    * For javascript/typescript, just copy and paste it somewhere in `index.js`/`index.tsx` respectively. Note I copied and pasted it at the end of the code and that worked.
3. https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-RUM-get-started-generate-data.html
    * Any actions should be displayed in the dashboard


## Advanced Configurations

The object generated by javascript/typescript code snippet is sometimes not enough (depending on the complexity of the web applications). We can manually modify it. Details are available [here](https://github.com/aws-observability/aws-rum-web/blob/main/docs/configuration.md)

### Page IDs

The default `pageIdFormat` is set as `PAGE_ID_FORMAT.PATH`. If our web application routes by not only `/` but also with `#`, cloudwatch rum will not recognize them as distinct pages when monitoring. To fix this:

```
import { PAGE_ID_FORMAT } from 'aws-rum-web/dist/cjs/orchestration/Orchestration';

const config: AwsRumConfig = {
    // other configurations
    pageIdFormat: PAGE_ID_FORMAT.PATH_AND_HASH,
};
```
